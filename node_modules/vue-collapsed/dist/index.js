"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),b="--vc-auto-duration",$=`height var(${b}) cubic-bezier(0.33, 1, 0.68, 1)`,v={padding:0},H={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function x(n){return{height:`${(n==null?void 0:n.scrollHeight)??0}px`}}function y(n){if(!n)return{};const{transition:u}=getComputedStyle(n);return u==="all 0s ease 0s"?{transition:$}:{transition:u}}function C(n){if(!n)return!0;const{transition:u}=getComputedStyle(n);return window.matchMedia("(prefers-reduced-motion: reduce)").matches||u.includes("none")||u.includes("height 0s")}e.defineComponent({inheritAttrs:!0});const R=e.defineComponent({__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:u}){const d=n,o=e.toRef(d,"when"),i=e.toRef(d,"baseHeight"),p=e.computed(()=>({overflow:"hidden",height:`${i.value}px`})),c=e.computed(()=>({...v,...i.value===0?{display:"none"}:p.value})),t=e.ref(null),r=e.ref(o.value?"expanded":"collapsed"),a=e.shallowRef({}),h=e.ref(300),f=e.computed(()=>({[b]:`${h.value}ms`}));function g(){a.value=v,r.value="expanded",u("expanded")}function m(){a.value=c.value,r.value="collapsed",u("collapsed")}function S(l){var s,w;l.target===t.value&&l.propertyName==="height"&&(o.value?((s=t.value)==null?void 0:s.scrollHeight)===parseFloat(l.target.style.height)&&g():((w=t.value)==null?void 0:w.style.height)===`${i.value}px`&&m())}return e.onMounted(()=>{t.value&&(o.value||i.value!==0||(a.value=H),h.value=function(l=0){if(l===0)return 0;const s=l/36;return Math.round(10*(4+15*s**.25+s/5))}(t.value.scrollHeight-i.value),a.value=o.value?v:c.value)}),e.watch(o,l=>{if(l){if(C(t.value))return g();r.value="expanding",u("expand"),a.value={...v,...p.value,...f.value,willChange:"height"},requestAnimationFrame(()=>{a.value={...a.value,...x(t.value),...y(t.value)}})}else{if(C(t.value))return m();r.value="collapsing",u("collapse"),a.value={...a.value,...f.value,...x(t.value),willChange:"height"},requestAnimationFrame(()=>{a.value={...a.value,...p.value,...y(t.value)}})}}),e.watch(i,l=>{o.value||(a.value={...a.value,...l===0?{display:"none"}:{transition:"none",height:`${l}px`}})}),(l,s)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(d.as),{ref_key:"collapseRef",ref:t,style:e.normalizeStyle(a.value),onTransitionend:S,"data-collapse":r.value},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"default",e.normalizeProps(e.guardReactiveProps({state:r.value})))]),_:3},40,["style","data-collapse"]))}});exports.Collapse=R;
