import {
  computed,
  createBlock,
  defineComponent,
  guardReactiveProps,
  normalizeProps,
  normalizeStyle,
  onMounted,
  openBlock,
  ref,
  renderSlot,
  resolveDynamicComponent,
  shallowRef,
  toRef,
  watch,
  withCtx
} from "./chunk-J6475X5X.js";

// node_modules/vue-collapsed/dist/index.mjs
var _ = "--vc-auto-duration";
var T = `height var(${_}) cubic-bezier(0.33, 1, 0.68, 1)`;
var r = { padding: 0 };
var j = { position: "absolute", width: "1px", height: "1px", padding: "0", margin: "-1px", overflow: "hidden", clip: "rect(0, 0, 0, 0)", whiteSpace: "nowrap", border: "0" };
function b(t) {
  return { height: `${(t == null ? void 0 : t.scrollHeight) ?? 0}px` };
}
function $(t) {
  if (!t)
    return {};
  const { transition: n } = getComputedStyle(t);
  return n === "all 0s ease 0s" ? { transition: T } : { transition: n };
}
function H(t) {
  if (!t)
    return true;
  const { transition: n } = getComputedStyle(t);
  return window.matchMedia("(prefers-reduced-motion: reduce)").matches || n.includes("none") || n.includes("height 0s");
}
defineComponent({ inheritAttrs: true });
var G = defineComponent({ __name: "Collapse", props: { when: { type: Boolean }, baseHeight: { default: 0 }, as: { default: "div" } }, emits: ["collapse", "expand", "collapsed", "expanded"], setup(t, { emit: n }) {
  const v = t, u = toRef(v, "when"), o = toRef(v, "baseHeight"), p = computed(() => ({ overflow: "hidden", height: `${o.value}px` })), h = computed(() => ({ ...r, ...o.value === 0 ? { display: "none" } : p.value })), l = ref(null), i = ref(u.value ? "expanded" : "collapsed"), e = shallowRef({}), g = ref(300), f = computed(() => ({ [_]: `${g.value}ms` }));
  function m() {
    e.value = r, i.value = "expanded", n("expanded");
  }
  function x() {
    e.value = h.value, i.value = "collapsed", n("collapsed");
  }
  function k(a) {
    var s, w;
    a.target === l.value && a.propertyName === "height" && (u.value ? ((s = l.value) == null ? void 0 : s.scrollHeight) === parseFloat(a.target.style.height) && m() : ((w = l.value) == null ? void 0 : w.style.height) === `${o.value}px` && x());
  }
  return onMounted(() => {
    l.value && (u.value || o.value !== 0 || (e.value = j), g.value = function(a = 0) {
      if (a === 0)
        return 0;
      const s = a / 36;
      return Math.round(10 * (4 + 15 * s ** 0.25 + s / 5));
    }(l.value.scrollHeight - o.value), e.value = u.value ? r : h.value);
  }), watch(u, (a) => {
    if (a) {
      if (H(l.value))
        return m();
      i.value = "expanding", n("expand"), e.value = { ...r, ...p.value, ...f.value, willChange: "height" }, requestAnimationFrame(() => {
        e.value = { ...e.value, ...b(l.value), ...$(l.value) };
      });
    } else {
      if (H(l.value))
        return x();
      i.value = "collapsing", n("collapse"), e.value = { ...e.value, ...f.value, ...b(l.value), willChange: "height" }, requestAnimationFrame(() => {
        e.value = { ...e.value, ...p.value, ...$(l.value) };
      });
    }
  }), watch(o, (a) => {
    u.value || (e.value = { ...e.value, ...a === 0 ? { display: "none" } : { transition: "none", height: `${a}px` } });
  }), (a, s) => (openBlock(), createBlock(resolveDynamicComponent(v.as), { ref_key: "collapseRef", ref: l, style: normalizeStyle(e.value), onTransitionend: k, "data-collapse": i.value }, { default: withCtx(() => [renderSlot(a.$slots, "default", normalizeProps(guardReactiveProps({ state: i.value })))]), _: 3 }, 40, ["style", "data-collapse"]));
} });
export {
  G as Collapse
};
//# sourceMappingURL=vue-collapsed.js.map
